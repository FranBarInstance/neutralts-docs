<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="{:locale; … :}"><title>neutralts::bif::parse_bif_locale - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-42caa33d.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="neutralts" data-themes="" data-resource-suffix="" data-rustdoc-version="1.84.1 (e71f9a9a9 2025-01-27)" data-channel="1.84.1" data-search-js="search-92e6798f.js" data-settings-js="settings-0f613d39.js" ><script src="../../../static.files/storage-59e33391.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../neutralts/index.html">neutralts</a><span class="version">1.3.0-beta2</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module parse_<wbr>bif_<wbr>locale</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#locale--" title="{:locale; … :}">{:locale; … :}</a><ul><li><a href="#modifiers" title="Modifiers:">Modifiers:</a></li><li><a href="#flags" title="Flags">Flags</a></li><li><a href="#return-value" title="Return value">Return value</a></li><li><a href="#dynamic-evaluation" title="Dynamic evaluation">Dynamic evaluation</a></li><li><a href="#translation-evaluation" title="Translation evaluation">Translation evaluation</a></li><li><a href="#relative-to-current-file-path" title="Relative to current file path">Relative to current file path</a></li></ul></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In neutralts::<wbr>bif</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../../index.html">neutralts</a>::<wbr><a href="../index.html">bif</a></span><h1>Module <span>parse_bif_locale</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/neutralts/bif/parse_bif_locale.rs.html#1-113">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="locale--"><a class="doc-anchor" href="#locale--">§</a>{:locale; … :}</h2>
<p>Includes a language json file:</p>
<div class="example-wrap"><pre class="language-html"><code>{:locale; filename :}

{:locale; file.json :}</code></pre></div>
<p>The language files must have a structure similar to this one:</p>
<div class="example-wrap"><pre class="language-json"><code>{
    &quot;trans&quot;: {
        &quot;es&quot;: {
            &quot;Hello&quot;: &quot;Hola&quot;,
            &quot;ref:greeting&quot;: &quot;Hola&quot;,
        },
        &quot;es-ES&quot;: {
            &quot;Hello&quot;: &quot;Hola&quot;,
            &quot;ref:greeting&quot;: &quot;Hola&quot;,
        }
    }
}</code></pre></div>
<p>A “trans” key and then the key for each language, any other key will produce an error or be ignored.</p>
<h3 id="modifiers"><a class="doc-anchor" href="#modifiers">§</a>Modifiers:</h3><div class="example-wrap"><pre class="language-html"><code>{:!locale; ... :}
{:^locale; ... :}</code></pre></div><h4 id="modifier--not"><a class="doc-anchor" href="#modifier--not">§</a>Modifier: ! (not)</h4>
<p>The “not” modifier prevents the file from being reload if it has already been parsed. Generally, language files should only be included once, it will increase performance if “not” is used:</p>
<div class="example-wrap"><pre class="language-html"><code>{:!locale; file.json :}</code></pre></div><h3 id="flags"><a class="doc-anchor" href="#flags">§</a>Flags</h3><div class="example-wrap"><pre class="language-html"><code>{:locale; {:flg; require noparse :} &gt;&gt; ... :}</code></pre></div><h4 id="flag-require"><a class="doc-anchor" href="#flag-require">§</a>Flag: require</h4>
<p>By default, no error will occur if the file to locale does not exist, unless the “require” flag is set.</p>
<div class="example-wrap"><pre class="language-html"><code>{:locale; {:flg; require :} &gt;&gt; file.json :}</code></pre></div><h4 id="flag-noparse"><a class="doc-anchor" href="#flag-noparse">§</a>Flag: noparse</h4>
<p>The “noparse” flag prevents the file to be included from being parsed.</p>
<div class="example-wrap"><pre class="language-html"><code>{:locale; {:flg; noparse :} &gt;&gt; file.json :}</code></pre></div><h3 id="return-value"><a class="doc-anchor" href="#return-value">§</a>Return value</h3>
<p>“locale” show no output but returns “{:;:}” (unprintable) if successful, so this is possible:</p>
<div class="example-wrap"><pre class="language-html"><code>{:locale; file.{:lang;:}.json :}
{:else; file.en.json :}</code></pre></div><h3 id="dynamic-evaluation"><a class="doc-anchor" href="#dynamic-evaluation">§</a>Dynamic evaluation</h3>
<p>The following will produce an error:</p>
<div class="example-wrap"><pre class="language-html"><code>{:locale; {:;varname:} :}</code></pre></div>
<p>For safety reasons, when evaluating the complete variable it is necessary to use “allow”:</p>
<div class="example-wrap"><pre class="language-html"><code>{:locale; {:allow; allowed-words-list &gt;&gt; {:;varname:} :} :}
{:locale; {:!allow; traversal &gt;&gt; {:;varname:} :} :}</code></pre></div>
<p>In any case, you must use “allow” on any variable that comes from the context. See the “allow” and “declare” bifs for more details.</p>
<h3 id="translation-evaluation"><a class="doc-anchor" href="#translation-evaluation">§</a>Translation evaluation</h3>
<p>Translations may contain variables:</p>
<div class="example-wrap"><pre class="language-json"><code>{
    &quot;trans&quot;: {
        &quot;es&quot;: {
            &quot;Welcome to {:;web-site-name:}&quot;: &quot;Bienvenido a {:;web-site-name:}&quot;
        }
    }
}</code></pre></div>
<p>Variables are resolved at the time the file is included.</p>
<p>(*) Translations included in the “schema” are not evaluated, only those loaded with “locale”.</p>
<h3 id="relative-to-current-file-path"><a class="doc-anchor" href="#relative-to-current-file-path">§</a>Relative to current file path</h3>
<p>We can use relative paths to the currently localed file with the “#” symbol:</p>
<div class="example-wrap"><pre class="language-html"><code>{:locale; #/file.json :}</code></pre></div>
<p>It will be relative to the file loaded with “include”:</p>
<div class="example-wrap"><pre class="language-html"><code>{:*
    file: /path/to/tpl/snippets.ntpl
    Here #/file.json is: /path/to/tpl/file.json
*:}

{:locale; #/file.json :}</code></pre></div>
<hr />
</div></details></section></div></main></body></html>